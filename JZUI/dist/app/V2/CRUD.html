<!DOCTYPE html>
<html lang="en">
  <head>
    <title>index</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<!-- Core -->
<link href="../../../src/local_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Menu -->
<link href="../../../src/js/lib/metisMenu/dist/metisMenu.min.css" rel="stylesheet">
 
<!-- Fonts -->
<link href="../../../src/local_modules/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"> 

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--> 
<script src="../../../src/local_modules/jquery/dist/jquery.min.js" type="text/javascript"></script>
<script src="../../../src/local_modules/vue/dist/vue.js" type="text/javascript"></script>
<script src="../../../src/local_modules/bootstrap/dist/js/bootstrap.js" type="text/javascript"></script>
<script src="../../../src/js/lib/metisMenu/dist/metisMenu.min.js" type="text/javascript"></script>
<script src="../../../src/js/lib/tools/validate/jquery.validate.min.js"></script> 
<script src="../../../src/js/lib/tools/validate/additional-methods.js"></script>
<script src="../../../src/js/lib/tools/validate/messages_zh.js"></script>
<script src="../../../src/js/lib/tools/validate/validate-methods.js"></script>
<script src="../../../src/js/lib/sb-admin-2.js"></script> 
<script src="../../../src/js/lib/tools/WdatePicker/WdatePicker.js"></script>
<script src="../../../src/js/lib/tools/bootbox.js"></script>
<link href="../../../src/js/utils/prettify/prettify.min.css" rel="stylesheet" type="text/css" />
 
<link href="../../../src/js/lib/tools/lightbox/css/lightbox.min.css" rel="stylesheet" type="text/css" />
<script src="../../../src/js/lib/tools/lightbox/js/lightbox.min.js"></script> 



<link href="../../../src/js/lib/tools/zTree/zTreeStyle.css" rel="stylesheet" type="text/css" />
<script src="../../../src/js/lib/tools/zTree/jquery.ztree.all.min.js"></script> 

<script src="../../../src/js/utils/prettify/prettify.js"></script>

<script>var Ctx = ctx = '',ENV_JZ = 'dev';</script>
<link href="../../../src/css/common/JZ.css" rel="stylesheet" type="text/css" />
<script src="../../../dist/js/app/JZ/JZ.js"></script>
	<!-- Theme style -->
<link rel="stylesheet" href="../../../../dist/css/AdminLTE.min.css">
<link rel="stylesheet" href="../../../../dist/css/style.css">
<!-- AdminLTE Skins. Choose a skin from the css/skins
    folder instead of downloading all of them to reduce the load. -->
<link rel="stylesheet" href="../../../../dist/css/skins/_all-skins.min.css">
<script src="../../../../bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<script src="../../../../bower_components/fastclick/lib/fastclick.js"></script>
<script src="../../../../dist/js/adminlte.min.js"></script>
<link rel="stylesheet" href="../../../../plugins/iCheck/all.css">
<script src="../../../../plugins/iCheck/icheck.min.js"></script>
  </head>
  <body>
	  <div id="page-wrapper"> 
		<h6>JZ.Vue</h6>
		<div class="box box-default">
			<div class="box-header">
			<h3 class="box-title">筛选</h3>
			<div class="box-tools pull-right">
				<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
				<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
			</div>
			</div>
			<div class="box-body">
				<form id="filter_article"  method="post"> 
					<div class="row">
						<div class="col-sm-6 col-xs-12">
							<div class="row">
								<div class="form-group col-xs-6">
									<div class="input-group">
										<div class="input-group-addon">姓名</div>
										<input name="username" placeholder="请输入姓名" data-rule-required="true" type="text" class="form-control" />
									</div>
								</div>
								<div class="form-group col-xs-6">
									<div class="input-group">
										<div class="input-group-addon">姓名</div>
										<input name="username" placeholder="请输入姓名" data-rule-required="true" type="text" class="form-control" />
									</div>
								</div>
							</div>
						</div>
						<div class="col-sm-6 col-xs-12">
							<div class="row">
								<div class="form-group col-xs-6">
									<div class="input-group">
										<div class="input-group-addon">姓名</div>
										<input name="username" placeholder="请输入姓名" data-rule-required="true" type="text" class="form-control" />
									</div>
								</div>
								<div class="form-group col-xs-6">
									<div class="input-group">
										<div class="input-group-addon">姓名</div>
										<input name="username" placeholder="请输入姓名" data-rule-required="true" type="text" class="form-control" />
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="box box-default">
			<div class="box-header">
			<h3 class="box-title">结果
				<button type="button" class="btn btn-primary btn-xs" v-on:click='add_article()'>添加</button>
				<button type="button" class="btn btn-primary btn-xs pull-right">导出</button> 
			</h3>
			<div class="box-tools pull-right">
				<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
				<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
			</div>
			</div>
			<div class="box-body">
				<div class="table-responsive">
					<table width="100%" class="table table-striped table-bordered table-hover" id="vue-table3">
	                	<thead>
	                         <tr>
							  <th style="min-width:40px;"><input type="checkbox"  v-model="ArticleList_CheckAll" />({{ArticleList_CheckCount}})</th>
	                          <th>序号</th>  
			                  <th style="min-width:50px;">操作</th>
	                          <th>标题</th>
	                          <th>浏览</th>
	                          <th>提交时间</th>
	                         </tr>
	                     </thead>
	                     <tbody>
							<tr v-for="item in ArticleList">
								<td><input type="checkbox" :value="item.id" v-model="ArticleListSelects" /></td>
								<td>{{item.vueIndex}}</td>
								<td>
									<button type="button" class="btn btn-warning btn-xs" v-on:click="edit_article(item)">修改</button>
								</td>
								<td>{{ item.name }}</td>
								<td>{{ item.clicks }}</td>
								<td>{{ item.recorddate }}</td>
							</tr>
						</tbody>
		              </table>
		         </div>
		        <ul id="pager-article" class="pagination pull-right"></ul>
			</div>
		</div>
		<div class="modal fade" id="modal_edit_article" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
			<div class="modal-content">
				<form id="form_article"  method="post">
					<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">标题</h4>
					</div>
						<div class="modal-body">
							<div class="row">
								<div class="form-group col-sm-6 col-xs-6">
									<div class="input-group">
										<div class="input-group-addon">标题</div>
										<input name="name" v-model="detail_article.name" placeholder="请输入标题" data-rule-required="true" type="text" class="form-control" />
									</div>
								</div>
								<div class="form-group col-sm-6 col-xs-6">
									<div class="input-group">
										<div class="input-group-addon">标题</div>
										<input name="clicks" v-model="detail_article.clicks" placeholder="请输入标题" data-rule-required="true" type="text" class="form-control" />
									</div>
								</div>
								<div class="form-group col-sm-6 col-xs-6">
									<div class="input-group">
										<div class="input-group-addon">标题</div>
										<input name="clicks" v-model="detail_article.clicks" placeholder="请输入标题" data-rule-required="true" type="text" class="form-control" />
									</div>
								</div>
								<div class="form-group col-sm-6 col-xs-6">
									<div class="input-group">
										<div class="input-group-addon">标题</div>
										<input name="clicks" v-model="detail_article.clicks" placeholder="请输入标题" data-rule-required="true" type="text" class="form-control" />
									</div>
								</div>
							</div> 
						</div>
					<div class="modal-footer"> 
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					<button type="submit" class="btn btn-primary">提交</button>
					</div>
				</form>
			</div>
			</div>
		</div>
<script>
var ajaxUrls = {
	article:{
		List:JZ.AjaxUrl.DemoPageData.urlRandom(),
		Update:'/demo/updateAction',
		Add:'/demo/addAction'
	}
};
var form = JZ.Form({
	form:'#form_article',
	beginSubmit:function(_submit){
		if(confirm('确认要提交吗?'))
			return true;
		return true;
	},
	success:function(data){
		alert('操作成功!');
		vm.tables.article.reload();
		$('#modal_edit_article').modal('hide');
	},
	error:function(data){
		console.log(data);
	}
});
vm = new JZ.Vue({ 
	tables:{//初始化表格
		article:{
			data:'ArticleList',				//(必需)数据集合标识
			url:ajaxUrls.article.List,//(必需)数据接口地址
			dataCheckes:'ArticleListSelects',	//(多选功能必需的参数)多选容器标识,用于存放选择的结果。如:vm.UserListSelects=[1,4,5]
			key:'id',					//(多选功能必需的参数)数据表中的主键列名(或唯一标识列)
			el_pager:'#pager-article',			//(分页功能必需的参数)分页容器
			limit:5,					//(分页功能可选的参数)每页条数,默认10
			resizable:true,//可拖拽列 
			singleLine:true,//禁止内容换行	
			autoRequest:false//默认不请求数据
		}
	},
	data:{
		detail_article:{}
	},
	filter:function(){
		
	},
	methods:{
		//搜索
		search:function(){
			var params = '&'+$('#filter_article').serialize();
			vm.tables.article.setUrl(ajaxUrls.article.List + params);
			vm.tables.article.reload();
		},
		//添加
		add_article:function(){
			vm.article_detail = {
				name:'',
				clicks:0,
				recorddate:new Date().getTime()
			};
			form.setUrl(ajaxUrls.article.Add);
			$('label.form-require-error').remove();//清空验证信息
			$('#modal_edit_article').modal('show');
		},
		//编辑
		edit_article:function(item){
			vm.detail_article = item;
			form.setUrl(ajaxUrls.article.Update);
			$('label.form-require-error').remove();//清空验证信息
			$('#modal_edit_article').modal('show');
		}
	}
});
vm.search();
</script>
</div>

<script>

    $('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({

      checkboxClass: 'icheckbox_flat-green',

      radioClass   : 'iradio_flat-green'

    })

  JZ.onWindowLoad(function () {

        $('pre').addClass('prettyprint');

        prettyPrint(); 

  })

</script>
  </body>
</html>
 